package apis

import (
	"errors"

	. "github.com/onsi/ginkgo"
	. "github.com/onsi/gomega"
	"github.com/pilly-io/api/internal/models"
)

var _ = Describe("Utils", func() {
	Describe("ErrorsToJSON()", func() {
		It("Should retourn a map with a list of errors", func() {
			error1 := errors.New("error1")
			json := ErrorsToJSON(error1)
			Expect(json).To(HaveKey("errors"))
			Expect(json["errors"]).To(ContainElement("error1"))
		})
	})
	Describe("ObjectToJSON()", func() {
		It("Should retourn a map with an object", func() {
			cluster1 := &models.Cluster{Name: "cluster1", Provider: "aws"}
			json := ObjectToJSON(cluster1)
			Expect(json).To(HaveKey("data"))
			Expect(json["data"]).To(Equal(cluster1))
		})
	})
})
